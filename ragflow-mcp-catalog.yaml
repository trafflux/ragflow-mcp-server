# Local Catalog for Docker Desktop MCP Toolkit Testing
# This file enables local testing of the RAGFlow MCP Server before publishing to Docker MCP Registry
#
# IMPORTANT: After building your local image, place this file in ~/.docker/mcp/catalogs/
# and restart Docker Desktop or run: docker mcp catalog refresh
#
# Directory structure:
#   ~/.docker/mcp/catalogs/ragflow-local.yaml  (this file)
#
# Then configure in Docker Desktop:
#   Settings → MCP Toolkit → RAGFlow MCP Server

version: 2
name: ragflow-local
displayName: RAGFlow MCP (Local Testing)
registry:
  ragflow-mcp-server:
    description: "RAGFlow Document Retrieval MCP Server - Search and retrieve documents from RAGFlow knowledge bases"
    title: "RAGFlow MCP Server"
    type: server
    image: ragflow-mcp-server:local
    
    tools:
      - name: ragflow_retrieval
        description: Search RAGFlow datasets and retrieve relevant documents for a given question. Supports filtering by dataset/document IDs and advanced search parameters.
    
    config:
      description: Configure connection to RAGFlow backend server
      secrets:
        - name: ragflow-mcp-server.ragflow_api_key
          env: RAGFLOW_API_KEY
          example: ragflow-xxxxxxxxxxxxxxxx
      env:
        - name: RAGFLOW_BASE_URL
          example: http://host.docker.internal:9380
          value: '{{ragflow-mcp-server.ragflow_base_url}}'
      parameters:
        type: object
        properties:
          ragflow_base_url:
            type: string
            description: RAGFlow backend server URL (use host.docker.internal for local RAGFlow)
            default: http://host.docker.internal:9380
          ragflow_api_key:
            type: string
            description: RAGFlow API key for authentication
        required:
          - ragflow_api_key
    
    meta:
      category: knowledge-retrieval
      tags:
        - ragflow
        - documents
        - search
        - retrieval
        - ai
        - knowledge-base
        - rag
    
    about:
      title: RAGFlow MCP Server
      description: |
        Model Context Protocol server that provides AI assistants with access to RAGFlow's 
        document retrieval capabilities. Search and retrieve relevant documents from RAGFlow 
        knowledge bases using natural language queries with support for advanced filtering, 
        similarity thresholds, and pagination.
      icon: https://avatars.githubusercontent.com/u/182288589?s=200&v=4
    
    source:
      project: https://github.com/trafflux/ragflow-mcp-server
